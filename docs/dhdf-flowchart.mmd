graph TD
    %% Initiation by User
    A[Start: User submits a health complaint] --> B{Is the complaint clear?}
    B -- No --> B1[Ask clarification questions]
    B1 -->|User responds| B
    B -- Yes --> C[Identify main symptoms and context]

    %% Additional Information Gathering
    C --> D[Ask follow-up questions based on user responses]
    D -->|User responds| D
    D --> E[Collect risk factors and medical history]

    %% Temporary Diagnosis Mapping
    E --> F[Build a temporary diagnosis map]
    F --> G{Is the map logically consistent?}
    G -- No --> G1[Re-analyze for conflicting information]
    G1 --> F
    G -- Yes --> H[Validate the temporary conclusion]

    %% High-Risk Symptom Detection
    H --> I{Are high-risk symptoms detected?}
    I -- Yes --> I1[Trigger medical alert or suggest referral]
    I1 --> K
    I -- No --> J[Check compliance with medical regulations]

    %% Legal & Ethical Compliance
    J --> J1{Is the diagnosis within AI legal boundaries?}
    J1 -- No --> J2[Escalate to human medical professional]
    J2 --> K
    J1 -- Yes --> K[Prepare diagnostic summary and suggestions]

    %% Final Validation & Output
    K --> L[Final validation before output]
    L --> M[Output: Deliver result to the user]